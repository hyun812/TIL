## staleTime

- 데이터가 `stale` [신선하지 않은, 오래된] 상태로 남아 있는 시간
- 밀리초 단위로 설정되며, 기본값은 0 (데이터를 페치해 오자마자 신선하지 않다고 간주)
- `fresh`한 데이터라면 API 호출 없이 캐싱된 데이터를 다시 사용
- `stale`한 데이터라면, 윈도우에 다시 포커스되었을 때나, 컴포넌트가 다시 마운트 될 때 등의 `트리가`거 발생했을 때 신선한 데이터로 다시 페치해 옴

<br/>

## gcTime

- 사용되지 않거나 비활성화된 데이터가 메모리에 남아 있는 시간
- 밀리초 단위로 설정되며, 기본값은 5분 (300000 밀리초)
- `Infinity` 로 설정하면 가비지 수집이 비활성화

  > 쿼리를 사용하는 모든 컴포넌트가 언마운트 된 이후부터 gcTime이 지나야 삭제

<br/>

## staleTime은 gcTime보다 작게 설정하는 것이 좋다

#### ex) `staleTime`을 Infinity, `gcTime`을 0으로 설정한다면?

- 쿼리가 비활성화되는 즉시 캐시 데이터는 삭제됨
- `staleTime`이 Infinity이기 때문에 캐시에 저장된 데이터를 사용할 수 있는 것처럼 보이지만 네트워크 요청을 필요로함

### 그렇다면 언제, 어떻게 조정하면 좋을까?

- 기본적으로는 `staleTime` 만을 조정하여 해결
- 자주 변경되는 데이터라면, 기본 설정을 바꾸지 않고 사용
- 자주 변경되지 않는 데이터라면, `staleTime`을 조정하여 네트워크 요청 횟수를 줄여 사용
  - 사용자가 로그인한 유저 1명인 경우 `staleTime`과 `gcTime`을 `Infinity`로 설정하고 변경이 일어났을 시 쿼리 무효화를 통해 새로운 데이터를 갱신하여 불필요한 HTTP Request 요청을 줄여 사용
