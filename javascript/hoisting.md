## 호이스팅이란 ?

코드가 실행되기 전 함수 선언 또는 변수 선언이 해당 스코프의 최상단으로 끌어올려 진 것 같은 현상

> 자바스크립트 엔진은 변수의 선언과 초기화 작업을 분리해서 진행하기 때문에 호이스팅이 발생

<br/>

## 변수 호이스팅

#### **1단계: 선언 단계(Declaration phase)**

- 변수를 `실행 컨텍스트`의 변수 객체에 등록
- 해당 변수 객체는 스코프가 참조하는 대상이 됨

#### **2단계: 초기화 단계(Initialization phase)**

- 변수 객체에 등록된 변수를 위한 공간을 `메모리`에 확보함
- 이 단계에서 변수는 `undefined`로 초기화 됨

#### **3단계: 할당 단계(Assignment phase)**

- `undefined`로 초기화된 변수에 실제 값을 할당한다.

<br/>

### var, let, const 키워드

- `var` 키워드로 선언한 변수는 런타임 이전에 "선언 단계"와 "초기화 단계"가 한번에 이뤄짐
- `let` 키워드로 선언한 변수는 "선언 단계"와 "초기화 단계"가 분리되어 진행됨

  - 런타임 이전에 "선언 단계"가 실행되지만 초기화 단계는 변수 선언문에 도달했을 때 실행됨
  - 스코프의 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간을 `일시적 사각지대(TDZ)`라고 함

<br/>

### let과 const의 경우에도 호이스팅이 발생한다

```javascript
let foo = 1; // 전역 변수

{
  console.log(foo); // ReferenceError: Cannot access 'foo' before initialization
  let foo = 2; // 지역 변수
}
```

- let 키워드로 선언한 변수가 호이스팅이 발생하지 않는다면 전역 변수 fooㅇ의 값을 출력해야하지만 참조에러가 발생함
- 자바스크립트는 모든 선언을 호이스팅하지만 let, const, class를 사용한 선언문은 호이스팅이 발생하지 않는 것 처럼 동작함

<br/>

## 함수 호이스팅

- 함수 선언문으로 정의한 함수의 경우 함수 호이스팅이 발생
- 함수 표현식으로 정의한 함수의 경우 변수 호이스팅이 발생

```javascript
console.log(add(2, 3)); // 5

function add(x, y) {
  return x + y;
}
```

- 함수 선언문으로 정의한 함수는 런타임 이전에 함수 객체가 먼저 생성됨
- 따라서 함수를 참조할 수 있으며 호출할 수도 있음
